# âœ¨ AI å°è¯´åˆ›ä½œå¹³å°

AIé©±åŠ¨çš„æ™ºèƒ½å°è¯´åˆ›ä½œå¹³å°ï¼Œæä¾›å®Œæ•´çš„åˆ›ä½œå·¥å…·é“¾ï¼ŒåŒ…æ‹¬å°è¯´ç®¡ç†ã€ä¸–ç•Œè§‚è®¾å®šã€è§’è‰²ç®¡ç†ã€æƒ…èŠ‚æ¶æ„å’ŒAIè¾…åŠ©å†™ä½œã€‚

![Status](https://img.shields.io/badge/status-ready-brightgreen)
![Version](https://img.shields.io/badge/version-2.0.0-blue)
![License](https://img.shields.io/badge/license-MIT-green)

## ğŸ¯ ç‰¹è‰²åŠŸèƒ½

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ“š **å°è¯´ç®¡ç†** - åˆ›å»ºã€ç¼–è¾‘ã€ç®¡ç†ä½ çš„å°è¯´ä½œå“
- ğŸ‘¥ **è§’è‰²ç®¡ç†** - è¯¦ç»†çš„è§’è‰²æ¡£æ¡ˆï¼ŒåŒ…æ‹¬å¤–è²Œã€æ€§æ ¼ã€èƒŒæ™¯ã€å…³ç³»ç­‰
- ğŸ“– **ç« èŠ‚è“å›¾** - ç« èŠ‚è§„åˆ’ã€å¤§çº²ã€å†…å®¹ç¼–å†™å’Œç®¡ç†
- ğŸ­ **æƒ…èŠ‚æ¶æ„** - ä¸»çº¿ã€æ”¯çº¿æƒ…èŠ‚çš„è§„åˆ’å’Œè¿½è¸ª
- ğŸŒ **ä¸–ç•Œè§‚è®¾å®š** - æ„å»ºå®Œæ•´çš„ä¸–ç•Œè§‚ä½“ç³»

### AI æ™ºèƒ½åŠ©æ‰‹
- ğŸ¤– **AIè§’è‰²ç”Ÿæˆ** - æ ¹æ®è§’è‰²ç±»å‹è‡ªåŠ¨ç”Ÿæˆå®Œæ•´è§’è‰²æ¡£æ¡ˆ
- ğŸ“ **AIæƒ…èŠ‚ç”Ÿæˆ** - æ™ºèƒ½åˆ›å»ºä¸»çº¿/æ”¯çº¿æƒ…èŠ‚å¤§çº²
- ğŸ“‹ **AIç« èŠ‚å¤§çº²** - åŸºäºä¸Šä¸‹æ–‡ç”Ÿæˆç« èŠ‚å¤§çº²
- âœ¨ **AIå†…å®¹æ‰©å±•** - æ‰©å±•ç®€çŸ­å†…å®¹ä¸ºè¯¦ç»†æè¿°
- ğŸ¨ **å¤šé£æ ¼æ”¯æŒ** - ç®€æ´ã€è¯¦ç»†ã€æˆå‰§åŒ–ç­‰å¤šç§å†™ä½œé£æ ¼

### ç®¡ç†åå°
- ğŸ” **ç®¡ç†å‘˜ç³»ç»Ÿ** - å®Œæ•´çš„ç®¡ç†å‘˜è®¤è¯å’Œæƒé™ç®¡ç†
- ğŸ“Š **æ•°æ®ç»Ÿè®¡** - å¹³å°æ•°æ®æ¦‚è§ˆå’Œç»Ÿè®¡åˆ†æ
- ğŸ‘¨â€ğŸ’¼ **ç”¨æˆ·ç®¡ç†** - ç®¡ç†å‘˜è´¦å·çš„åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤
- ğŸ“š **å†…å®¹ç®¡ç†** - å°è¯´å†…å®¹çš„å®¡æ ¸å’Œç®¡ç†

### æŠ€æœ¯ç‰¹æ€§
- ğŸ¨ **ç¾è§‚UI** - ç°ä»£åŒ–çš„æ¸å˜è®¾è®¡å’Œæµç•…åŠ¨ç”»
- ğŸ“± **å“åº”å¼** - å®Œç¾æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- ğŸš€ **é«˜æ€§èƒ½** - ä¼˜åŒ–çš„æ•°æ®åº“ç´¢å¼•å’Œç¼“å­˜ç­–ç•¥
- ğŸ”’ **å®‰å…¨** - JWTè®¤è¯ã€å¯†ç åŠ å¯†ã€å®Œå–„çš„æ•°æ®éªŒè¯
- ğŸ”Œ **AIé›†æˆ** - æ”¯æŒ OpenAIã€Anthropic ç­‰å¤šä¸ªAIæä¾›å•†

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ“‹ ç¯å¢ƒè¦æ±‚

- Python 3.9+
- Node.js 18+
- Git

### ğŸ”§ å®‰è£…æ­¥éª¤

#### æ–¹æ³• 1ï¼šä¸€é”®å®‰è£…ï¼ˆæ¨èï¼‰

```bash
git clone <repository-url>
cd write_novel
chmod +x setup.sh
./setup.sh
```

#### æ–¹æ³• 2ï¼šDocker Compose

```bash
docker compose up -d
```

è®¿é—®:
- å‰ç«¯: http://localhost:5173
- åç«¯: http://localhost:8000
- APIæ–‡æ¡£: http://localhost:8000/docs
- ç®¡ç†åå°: http://localhost:5173/admin

#### æ–¹æ³• 3ï¼šæ‰‹åŠ¨å®‰è£…

**å¯åŠ¨åç«¯**
```bash
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
python init_db.py  # åˆå§‹åŒ–æ•°æ®åº“
uvicorn app.main:app --reload
```

**å¯åŠ¨å‰ç«¯**
```bash
cd frontend
npm install
npm run dev
```

**è®¿é—®åº”ç”¨**
- å‰ç«¯: http://localhost:5173
- åç«¯API: http://localhost:8000
- APIæ–‡æ¡£: http://localhost:8000/docs

## ğŸ“– ä½¿ç”¨æŒ‡å—

### åˆ›å»ºç®¡ç†å‘˜è´¦å·

é¦–æ¬¡è¿è¡Œæ—¶ï¼Œéœ€è¦åˆ›å»ºç®¡ç†å‘˜è´¦å·ï¼ˆé¦–ä¸ªè´¦å·è‡ªåŠ¨æˆä¸ºè¶…çº§ç®¡ç†å‘˜ï¼‰ï¼š

**æ–¹æ³• 1ï¼šAPIåˆ›å»º**
```bash
curl -X POST http://localhost:8000/api/admin/register \
  -H "Content-Type: application/json" \
  -d '{
    "username": "admin",
    "email": "admin@example.com",
    "password": "admin123",
    "full_name": "ç³»ç»Ÿç®¡ç†å‘˜"
  }'
```

**æ–¹æ³• 2ï¼šé€šè¿‡æ³¨å†Œé¡µé¢**
è®¿é—® http://localhost:5173/admin/login ä½¿ç”¨ä¸Šè¿°å‡­æ®ç™»å½•

### ç®¡ç†åå°åŠŸèƒ½

ç™»å½•åå°åï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹åŠŸèƒ½ï¼š

1. **ä»ªè¡¨ç›˜** - æŸ¥çœ‹å¹³å°ç»Ÿè®¡æ•°æ®
   - å°è¯´æ€»æ•°åŠå„çŠ¶æ€ç»Ÿè®¡
   - ç®¡ç†å‘˜æ•°é‡

2. **å°è¯´ç®¡ç†** - ç®¡ç†æ‰€æœ‰å°è¯´
   - æŸ¥çœ‹æ‰€æœ‰å°è¯´åˆ—è¡¨
   - åˆ é™¤å°è¯´

3. **ç®¡ç†å‘˜ç®¡ç†** - ç®¡ç†ç®¡ç†å‘˜è´¦å·ï¼ˆéœ€è¶…çº§ç®¡ç†å‘˜æƒé™ï¼‰
   - åˆ›å»ºæ–°ç®¡ç†å‘˜
   - ç¼–è¾‘ç®¡ç†å‘˜ä¿¡æ¯
   - åˆ é™¤ç®¡ç†å‘˜è´¦å·
   - è®¾ç½®è¶…çº§ç®¡ç†å‘˜æƒé™

### ä½¿ç”¨ AI åŠŸèƒ½

å¹³å°æä¾›å¤šç§ AI è¾…åŠ©åˆ›ä½œåŠŸèƒ½ï¼š

**1. ç”Ÿæˆè§’è‰²æ¡£æ¡ˆ**
```bash
curl -X POST http://localhost:8000/api/ai/generate-character \
  -H "Content-Type: application/json" \
  -d '{
    "novel_id": "your-novel-id",
    "character_role": "protagonist",
    "character_traits": "å‹‡æ•¢ã€èªæ˜ã€å¯Œæœ‰æ­£ä¹‰æ„Ÿ"
  }'
```

**2. ç”Ÿæˆæƒ…èŠ‚å¤§çº²**
```bash
curl -X POST http://localhost:8000/api/ai/generate-plot \
  -H "Content-Type: application/json" \
  -d '{
    "novel_id": "your-novel-id",
    "plot_type": "main",
    "plot_length": "medium"
  }'
```

**3. ç”Ÿæˆç« èŠ‚å¤§çº²**
```bash
curl -X POST http://localhost:8000/api/ai/generate-chapter-outline \
  -H "Content-Type: application/json" \
  -d '{
    "novel_id": "your-novel-id",
    "chapter_number": 1,
    "chapter_theme": "ä¸»è§’è§‰é†’"
  }'
```

**4. æ‰©å±•å†…å®¹**
```bash
curl -X POST http://localhost:8000/api/ai/expand-content \
  -H "Content-Type: application/json" \
  -d '{
    "novel_id": "your-novel-id",
    "chapter_id": "your-chapter-id",
    "content_snippet": "ä»–èµ°è¿›äº†é»‘æš—çš„æ£®æ—",
    "expansion_style": "detailed"
  }'
```

è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜è¯·å‚é˜…ï¼š
- [UPDATES.md](UPDATES.md) - åŠŸèƒ½æ›´æ–°è¯¦æƒ…
- [APIæ–‡æ¡£](http://localhost:8000/docs) - å®Œæ•´APIå‚è€ƒ

## æŠ€æœ¯æ ˆ

### åç«¯
- **FastAPI** - ç°ä»£åŒ–çš„Python Webæ¡†æ¶
- **SQLAlchemy** - ORMæ•°æ®åº“å·¥å…·
- **Alembic** - æ•°æ®åº“è¿ç§»ç®¡ç†
- **Pydantic** - æ•°æ®éªŒè¯
- **SQLite/PostgreSQL** - æ•°æ®åº“

### å‰ç«¯
- **Vue 3** - æ¸è¿›å¼JavaScriptæ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨
- **Element Plus** - UIç»„ä»¶åº“
- **Pinia** - çŠ¶æ€ç®¡ç†
- **Vite** - æ„å»ºå·¥å…·

### AIé›†æˆ
- OpenAI (GPT-4, GPT-3.5)
- Anthropic (Claude 3)
- è‡ªå®šä¹‰APIæ”¯æŒ

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Python 3.9+
- Node.js 18+
- Docker & Docker Compose (å¯é€‰)

### æœ¬åœ°å¼€å‘

#### 1. å…‹éš†ä»“åº“
```bash
git clone <repository-url>
cd write_novel
```

#### 2. é…ç½®ç¯å¢ƒå˜é‡
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env
cp backend/.env.example backend/.env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„APIå¯†é’¥
# âš ï¸ è­¦å‘Šï¼šæ°¸è¿œä¸è¦æäº¤åŒ…å«çœŸå®å¯†é’¥çš„ .env æ–‡ä»¶åˆ°Gitï¼
```

#### 3. å¯åŠ¨åç«¯
```bash
cd backend

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# è¿è¡Œæ•°æ®åº“è¿ç§»
alembic upgrade head

# å¯åŠ¨æœåŠ¡
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

åç«¯APIå°†è¿è¡Œåœ¨: http://localhost:8000

#### 4. å¯åŠ¨å‰ç«¯
```bash
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

å‰ç«¯åº”ç”¨å°†è¿è¡Œåœ¨: http://localhost:5173

### Dockeréƒ¨ç½²

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆSQLiteæ¨¡å¼ï¼‰
docker-compose up -d

# å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆPostgreSQLæ¨¡å¼ï¼‰
docker-compose --profile postgres up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down
```

è®¿é—®:
- å‰ç«¯: http://localhost:5173
- åç«¯API: http://localhost:8000
- APIæ–‡æ¡£: http://localhost:8000/docs

## é¡¹ç›®ç»“æ„

```
write_novel/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/          # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ core/         # æ ¸å¿ƒé…ç½®
â”‚   â”‚   â”œâ”€â”€ models/       # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ schemas/      # PydanticéªŒè¯æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ services/     # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â””â”€â”€ main.py       # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ alembic/          # æ•°æ®åº“è¿ç§»
â”‚   â”œâ”€â”€ requirements.txt  # Pythonä¾èµ–
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ stores/       # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ types/        # TypeScriptç±»å‹
â”‚   â”‚   â”œâ”€â”€ views/        # é¡µé¢è§†å›¾
â”‚   â”‚   â”œâ”€â”€ router/       # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ main.ts       # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ package.json      # npmä¾èµ–
â”‚   â””â”€â”€ Dockerfile
â””â”€â”€ docker-compose.yml
```

## æ ¸å¿ƒåŠŸèƒ½

### å·²å®ç°
- âœ… å°è¯´åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤
- âœ… å¤šAIæä¾›å•†æ”¯æŒï¼ˆOpenAIã€Anthropicã€è‡ªå®šä¹‰ï¼‰
- âœ… ä¸–ç•Œè§‚è®¾å®šæ•°æ®æ¨¡å‹
- âœ… å“åº”å¼å‰ç«¯ç•Œé¢
- âœ… æ•°æ®åº“è¿ç§»ç®¡ç†
- âœ… æ—¥å¿—è®°å½•ç³»ç»Ÿ
- âœ… API é€Ÿç‡é™åˆ¶
- âœ… é”™è¯¯å¤„ç†å’ŒéªŒè¯
- âœ… æ•°æ®åº“è¿æ¥æ± 
- âœ… å•å…ƒæµ‹è¯•æ¡†æ¶
- âœ… å¥åº·æ£€æŸ¥ç«¯ç‚¹
- âœ… å‰ç«¯é”™è¯¯å¤„ç†
- âœ… ç¯å¢ƒå˜é‡é…ç½®

### è§„åˆ’ä¸­
- ğŸš§ è§’è‰²ç®¡ç†ç³»ç»Ÿ
- ğŸš§ æƒ…èŠ‚æ¶æ„å·¥å…·
- ğŸš§ ç« èŠ‚ç®¡ç†ä¸è“å›¾
- ğŸš§ æ™ºèƒ½å†…å®¹ç¼–è¾‘å™¨
- ğŸš§ è‡ªåŠ¨ä¿å­˜åŠŸèƒ½
- ğŸš§ ç”¨æˆ·è®¤è¯ä¸æˆæƒ
- ğŸš§ Redis ç¼“å­˜é›†æˆ
- ğŸš§ WebSocket å®æ—¶æ›´æ–°

## APIæ–‡æ¡£

å¯åŠ¨åç«¯åè®¿é—®: http://localhost:8000/docs

ä¸»è¦æ¥å£:
- `GET /api/novels` - è·å–å°è¯´åˆ—è¡¨
- `POST /api/novels` - åˆ›å»ºæ–°å°è¯´
- `GET /api/novels/{id}` - è·å–å°è¯´è¯¦æƒ…
- `PUT /api/novels/{id}` - æ›´æ–°å°è¯´
- `DELETE /api/novels/{id}` - åˆ é™¤å°è¯´
- `POST /api/ai/generate` - AIå†…å®¹ç”Ÿæˆ

## æ•°æ®åº“è¿ç§»

```bash
cd backend

# åˆ›å»ºæ–°è¿ç§»
alembic revision --autogenerate -m "æè¿°å˜æ›´å†…å®¹"

# åº”ç”¨è¿ç§»
alembic upgrade head

# å›æ»šè¿ç§»
alembic downgrade -1

# æŸ¥çœ‹è¿ç§»å†å²
alembic history
```

## å®‰å…¨æ³¨æ„äº‹é¡¹

âš ï¸ **é‡è¦å®‰å…¨æç¤º**:

1. **æ°¸è¿œä¸è¦æäº¤ `.env` æ–‡ä»¶åˆ°Git**
   - ä½¿ç”¨ `.env.example` ä½œä¸ºæ¨¡æ¿
   - `.env` æ–‡ä»¶å·²è¢« `.gitignore` æ’é™¤

2. **APIå¯†é’¥ç®¡ç†**
   - å®šæœŸè½®æ¢APIå¯†é’¥
   - ä½¿ç”¨ç¯å¢ƒå˜é‡è€Œéç¡¬ç¼–ç 
   - ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å¯†é’¥ç®¡ç†æœåŠ¡

3. **CORSé…ç½®**
   - ç”Ÿäº§ç¯å¢ƒä¸­é™åˆ¶å…è®¸çš„æº
   - å½“å‰é…ç½®ä»…é€‚ç”¨äºå¼€å‘ç¯å¢ƒ

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„æ•°æ®æ¨¡å‹
1. åœ¨ `backend/app/models/` åˆ›å»ºæ¨¡å‹æ–‡ä»¶
2. åœ¨ `backend/app/models/__init__.py` å¯¼å‡º
3. åˆ›å»ºå¯¹åº”çš„Pydantic schemaåœ¨ `backend/app/schemas/`
4. è¿è¡Œ `alembic revision --autogenerate -m "æè¿°"`
5. åº”ç”¨è¿ç§» `alembic upgrade head`

### æ·»åŠ æ–°çš„APIè·¯ç”±
1. åœ¨ `backend/app/api/` åˆ›å»ºè·¯ç”±æ–‡ä»¶
2. åœ¨ `backend/app/api/__init__.py` å¯¼å‡º
3. åœ¨ `backend/app/main.py` æ³¨å†Œè·¯ç”±
4. æ·»åŠ æ—¥å¿—è®°å½•å’Œé”™è¯¯å¤„ç†
5. ç¼–å†™å•å…ƒæµ‹è¯•

### æ·»åŠ æ–°çš„å‰ç«¯é¡µé¢
1. åœ¨ `frontend/src/views/` åˆ›å»ºVueç»„ä»¶
2. åœ¨ `frontend/src/router/index.ts` æ·»åŠ è·¯ç”±
3. å¦‚éœ€çŠ¶æ€ç®¡ç†ï¼Œåœ¨ `frontend/src/stores/` åˆ›å»ºstore
4. ä½¿ç”¨ composables å¤„ç†é”™è¯¯å’ŒåŠ è½½çŠ¶æ€

### è¿è¡Œæµ‹è¯•
```bash
# åç«¯æµ‹è¯•
cd backend
pytest

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=app --cov-report=html

# æŸ¥çœ‹æŠ¥å‘Š
open htmlcov/index.html
```

### æŸ¥çœ‹æ—¥å¿—
```bash
# å¼€å‘ç¯å¢ƒæ—¥å¿—è¾“å‡ºåˆ°æ§åˆ¶å°
# ç”Ÿäº§ç¯å¢ƒæ—¥å¿—ä¿å­˜åœ¨ backend/logs/app.log
```

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Request!

## è®¸å¯è¯

MIT License
